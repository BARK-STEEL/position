
<div class="container">
  <h2 class="title">Leaderboard</h2><hr>
  <br><br>

  <table class="table table-striped table-hover">
    <th>
      Rank
    </th>
    <th>
      Username
    </th>
    <th>
      Net Worth
    </th>
    <th>
      Portfolio
    </th>
    <th>
      Day's Gain
    </th>
    <th>
      Percent Gain
    </th>
    <th>
      Cash
    </th>

    <% @users.each_with_index do |user, i| %>
    <% percent_gain = (user.days_gain.to_f() / user.net_worth.to_f()) %>
    <% portfolio = (user.net_worth - user.cash) %>
    <% def color_performance(user) %>
    <%  @font_color = "black" %>

    <%  if (user.days_gain > 0) %>
    <%    @font_color = "green" %>
    <%  elsif (user.days_gain < 0) %>
    <%    @font_color = "red" %>
    <%  end %>
    <%  return @font_color %>
    <% end %>
    <% color_performance(user) %>

    <% def color_row(percent_gain) %>
    <%  @row_class = "active" %>

    <%  if (percent_gain > 0.2) %>
    <%    @row_class = "success" %>
    <%  elsif (percent_gain < -0.2) %>
    <%    @row_class = "danger" %>
    <%  end %>
    <%  return @row_class %>
    <% end %>
    <% color_row(percent_gain) %>


    <tr>
    <td>
      <%= i + 1%>
    </td>
    <td>
      <%= user.username %>
    </td>
    <td>
      $ <%= '%.2f' % user.net_worth %>
    </td>
    <td>
      $ <%= '%.2f' % portfolio %>
    </td>
    <td style="color: <%=@font_color %>">
      $ <%= '%.2f' % user.days_gain %>
    </td>
    <td style="color: <%=@font_color %>">
      <%= '%.2f' % percent_gain %>%
    </td>
    <td>
      $ <%= '%.2f' % user.cash %>
    </td>


    </tr>



    <% end %>

  </table>




</div>
